# 代码质量

保持代码简洁，避免AI产生幻觉，写出无法维护的代码。

## 核心原则

- **文件大小控制**：单文件超过500行就要拆分，否则AI会越写越乱
- **复杂逻辑拆分**：业务逻辑复杂（一堆if-else、状态转换）就拆成独立服务
- **减少图片使用**：图片占用大量上下文，让模型变笨

## 判断AI方案质量

学会《设计模式》和《代码简洁之道》很重要，能帮你判断AI给的方案好不好。不会的话直接问AI："我是新手，不理解设计模式，请用生活例子解释"。

每次AI给出方案时，问这几个问题：
- "这个方案用了什么设计模式？"
- "是否符合代码简洁之道？"
- "优缺点分别是什么？"

然后你判断优点是否符合需求，缺点是否可接受。这样能避免盲目接受AI的建议。

## 重构时机

什么时候需要重构？通常有几个信号：文件超过500行了，或者Claude开始频繁出错，总是理解不了你的代码，这时候就要考虑拆分了。

不要怕麻烦，重构比后期维护一坨屎山要轻松得多。

## 服务拆分策略

复杂的业务逻辑最好拆成独立的服务，比如用户管理、订单处理、支付这些，各自独立，通过HTTP API通信。这样Claude处理起来就简单多了，不会被复杂的逻辑绕晕。

还有个实用建议：尽量别给Claude发截图。图片会占用大量的上下文，让模型变笨。如果非要截图，就截小一点，只截关键部分。